# ðŸ—ï¸ System Architecture Documentation

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER LAYER                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Browser    â”‚  â”‚   Mobile     â”‚  â”‚   API Client â”‚         â”‚
â”‚  â”‚   (Streamlit)â”‚  â”‚   (Future)   â”‚  â”‚   (cURL/etc) â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    HTTP/REST API
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY LAYER                           â”‚
â”‚                                                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚   FastAPI App    â”‚                         â”‚
â”‚                    â”‚                  â”‚                         â”‚
â”‚                    â”‚  â€¢ Routing       â”‚                         â”‚
â”‚                    â”‚  â€¢ Validation    â”‚                         â”‚
â”‚                    â”‚  â€¢ Auth (Future) â”‚                         â”‚
â”‚                    â”‚  â€¢ Rate Limiting â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ORCHESTRATION LAYER                           â”‚
â”‚                                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚   LangGraph State Machine â”‚                     â”‚
â”‚              â”‚                            â”‚                     â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚              â”‚  â”‚  1. Process Input    â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚     Determine Type   â”‚ â”‚                     â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚              â”‚             â”‚              â”‚                     â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚              â”‚  â”‚  2. Route to Handler â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ PDF Processor    â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ URL Scraper      â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Query Handler    â”‚ â”‚                     â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚              â”‚             â”‚              â”‚                     â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚              â”‚  â”‚  3. RAG Processing   â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Chunk Text       â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Generate Embed   â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Summarize        â”‚ â”‚                     â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚              â”‚             â”‚              â”‚                     â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚              â”‚  â”‚  4. Graph Building   â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Add Paper Node   â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Create Citations â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Find Related     â”‚ â”‚                     â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚              â”‚             â”‚              â”‚                     â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚              â”‚  â”‚  5. Memory Storage   â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Save Interaction â”‚ â”‚                     â”‚
â”‚              â”‚  â”‚   â€¢ Update History   â”‚ â”‚                     â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PROCESSING   â”‚  â”‚     RAG     â”‚  â”‚    GRAPH      â”‚
â”‚     LAYER      â”‚  â”‚    LAYER    â”‚  â”‚    LAYER      â”‚
â”‚                â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚PDF Extract â”‚ â”‚  â”‚ â”‚Embeddingâ”‚ â”‚  â”‚ â”‚ Citation  â”‚ â”‚
â”‚ â”‚â€¢ Text      â”‚ â”‚  â”‚ â”‚Generatorâ”‚ â”‚  â”‚ â”‚ Network   â”‚ â”‚
â”‚ â”‚â€¢ Metadata  â”‚ â”‚  â”‚ â”‚         â”‚ â”‚  â”‚ â”‚           â”‚ â”‚
â”‚ â”‚â€¢ Citations â”‚ â”‚  â”‚ â”‚OpenAI   â”‚ â”‚  â”‚ â”‚ Neo4j     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚text-ada â”‚ â”‚  â”‚ â”‚ Cypher    â”‚ â”‚
â”‚                â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚URL Scraper â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â€¢ HTML Parseâ”‚ â”‚  â”‚ â”‚Retrieverâ”‚ â”‚  â”‚ â”‚ Memory    â”‚ â”‚
â”‚ â”‚â€¢ Content   â”‚ â”‚  â”‚ â”‚         â”‚ â”‚  â”‚ â”‚ Manager   â”‚ â”‚
â”‚ â”‚â€¢ Metadata  â”‚ â”‚  â”‚ â”‚Similarityâ”‚ â”‚  â”‚ â”‚           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚Search   â”‚ â”‚  â”‚ â”‚ JSON      â”‚ â”‚
â”‚                â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ Storage   â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚Text Split  â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚               â”‚
â”‚ â”‚â€¢ Chunking  â”‚ â”‚  â”‚ â”‚Generatorâ”‚ â”‚  â”‚               â”‚
â”‚ â”‚â€¢ Overlap   â”‚ â”‚  â”‚ â”‚         â”‚ â”‚  â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚GPT-4    â”‚ â”‚  â”‚               â”‚
â”‚                â”‚  â”‚ â”‚Summary  â”‚ â”‚  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STORAGE LAYER â”‚  â”‚    CACHE    â”‚  â”‚   EXTERNAL    â”‚
â”‚                â”‚  â”‚   (Future)   â”‚  â”‚   SERVICES    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚  ChromaDB  â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚            â”‚ â”‚  â”‚ â”‚  Redis  â”‚ â”‚  â”‚ â”‚  OpenAI   â”‚ â”‚
â”‚ â”‚ â€¢ Vectors  â”‚ â”‚  â”‚ â”‚         â”‚ â”‚  â”‚ â”‚   API     â”‚ â”‚
â”‚ â”‚ â€¢ Metadata â”‚ â”‚  â”‚ â”‚ â€¢ Query â”‚ â”‚  â”‚ â”‚           â”‚ â”‚
â”‚ â”‚ â€¢ Persist  â”‚ â”‚  â”‚ â”‚ â€¢ Embed â”‚ â”‚  â”‚ â”‚ â€¢ GPT-4   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â€¢ Resultâ”‚ â”‚  â”‚ â”‚ â€¢ Embed   â”‚ â”‚
â”‚                â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚   Neo4j    â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚            â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚ â€¢ Nodes    â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚ â€¢ Edges    â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚ â€¢ Queries  â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚                â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚File System â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚            â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚ â€¢ PDFs     â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â”‚ â€¢ Memory   â”‚ â”‚  â”‚             â”‚  â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚             â”‚  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagrams

### 1. PDF Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜
    â”‚ Upload PDF
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Streamlit UI   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ POST /upload/pdf
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI        â”‚
â”‚ â€¢ Validate     â”‚
â”‚ â€¢ Save File    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ process(pdf_path)
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LangGraph              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Detect Type     â”‚ â”‚
â”‚ â”‚    â†’ PDF           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2. PDF Processor   â”‚ â”‚
â”‚ â”‚    â€¢ Extract Text  â”‚ â”‚
â”‚ â”‚    â€¢ Get Metadata  â”‚ â”‚
â”‚ â”‚    â€¢ Find Citationsâ”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3. Text Chunker    â”‚ â”‚
â”‚ â”‚    â€¢ Split Text    â”‚ â”‚
â”‚ â”‚    â€¢ Add Overlap   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 4. RAG System      â”‚ â”‚
â”‚ â”‚    â€¢ Embed Chunks  â”‚â—„â”€â”
â”‚ â”‚    â€¢ Store Vector  â”‚  â”‚ OpenAI
â”‚ â”‚    â€¢ Generate Sum  â”‚â—„â”€â”˜ API
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 5. Citation Graph  â”‚ â”‚
â”‚ â”‚    â€¢ Add Paper     â”‚â”€â”€â–º Neo4j
â”‚ â”‚    â€¢ Add Citations â”‚
â”‚ â”‚    â€¢ Find Related  â”‚â—„â”€â”€ Neo4j
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 6. Memory          â”‚ â”‚
â”‚ â”‚    â€¢ Save Doc Info â”‚â”€â”€â–º JSON
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Return Results
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Display   â”‚
    â”‚  â€¢ Summary â”‚
    â”‚  â€¢ Citationsâ”‚
    â”‚  â€¢ Related â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Query Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜
    â”‚ "What is the methodology?"
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Streamlit UI   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ POST /query
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI        â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory Manager                 â”‚
â”‚ â€¢ Get Context from Past Queriesâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RAG System                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Embed Query             â”‚â—„â”€â”
â”‚ â”‚    OpenAI Embedding        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ OpenAI
â”‚          â–¼                      â”‚ API
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2. Vector Search           â”‚ â”‚
â”‚ â”‚    â€¢ ChromaDB              â”‚â—„â”€â”¤
â”‚ â”‚    â€¢ Similarity Search     â”‚  â”‚
â”‚ â”‚    â€¢ Top-5 Chunks          â”‚  â”‚ ChromaDB
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â–¼                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3. Build Context           â”‚ â”‚
â”‚ â”‚    â€¢ Combine Chunks        â”‚ â”‚
â”‚ â”‚    â€¢ Add Memory Context    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â–¼                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 4. Generate Answer         â”‚ â”‚
â”‚ â”‚    â€¢ GPT-4                 â”‚â—„â”€â”˜
â”‚ â”‚    â€¢ Grounded in Context   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory Manager                 â”‚
â”‚ â€¢ Save Query + Answer          â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display â”‚
â”‚ Answer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Citation Graph Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paper Input â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract Citationsâ”‚
â”‚ [1], [2], [3]    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Neo4j Graph Database         â”‚
â”‚                              â”‚
â”‚    Paper A                   â”‚
â”‚      â”‚                       â”‚
â”‚      â”œâ”€â”€[CITES]â”€â”€â–º Paper B   â”‚
â”‚      â”‚                       â”‚
â”‚      â”œâ”€â”€[CITES]â”€â”€â–º Paper C   â”‚
â”‚      â”‚                       â”‚
â”‚      â””â”€â”€[CITES]â”€â”€â–º Paper D   â”‚
â”‚                              â”‚
â”‚    Paper E                   â”‚
â”‚      â”‚                       â”‚
â”‚      â”œâ”€â”€[CITES]â”€â”€â–º Paper B   â”‚
â”‚      â”‚                       â”‚
â”‚      â””â”€â”€[CITES]â”€â”€â–º Paper C   â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Find Related Papers          â”‚
â”‚                              â”‚
â”‚ Papers citing same refs:     â”‚
â”‚ â€¢ Paper A & Paper E          â”‚
â”‚   (both cite B and C)        â”‚
â”‚                              â”‚
â”‚ Most influential:            â”‚
â”‚ â€¢ Paper B (2 citations)      â”‚
â”‚ â€¢ Paper C (2 citations)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Details

### 1. PDF Processing Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PDFProcessor Class              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Methods:                               â”‚
â”‚ â€¢ extract_text(pdf_path)               â”‚
â”‚   â””â”€â–º Returns: (text, metadata)       â”‚
â”‚                                        â”‚
â”‚ â€¢ extract_citations(text)              â”‚
â”‚   â””â”€â–º Regex patterns:                 â”‚
â”‚       â€¢ [1], [2] (numeric)            â”‚
â”‚       â€¢ (Author, 2023)                 â”‚
â”‚       â€¢ (Author et al., 2023)          â”‚
â”‚                                        â”‚
â”‚ â€¢ extract_key_concepts(text)           â”‚
â”‚   â””â”€â–º Looks for:                      â”‚
â”‚       â€¢ Abstract keywords              â”‚
â”‚       â€¢ Capitalized phrases            â”‚
â”‚       â€¢ Keywords section               â”‚
â”‚                                        â”‚
â”‚ â€¢ chunk_document(text)                 â”‚
â”‚   â””â”€â–º RecursiveCharacterTextSplitter â”‚
â”‚       â€¢ Size: 1000 chars               â”‚
â”‚       â€¢ Overlap: 200 chars             â”‚
â”‚                                        â”‚
â”‚ â€¢ extract_sections(text)               â”‚
â”‚   â””â”€â–º Finds:                          â”‚
â”‚       â€¢ Abstract                       â”‚
â”‚       â€¢ Introduction                   â”‚
â”‚       â€¢ Methodology                    â”‚
â”‚       â€¢ Results                        â”‚
â”‚       â€¢ Conclusion                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. RAG System Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         RAGSystem Class                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Initialization:                        â”‚
â”‚ â€¢ OpenAI Embeddings                    â”‚
â”‚ â€¢ ChromaDB Vector Store                â”‚
â”‚ â€¢ GPT-4 LLM                            â”‚
â”‚                                        â”‚
â”‚ Methods:                               â”‚
â”‚ â€¢ add_documents(chunks, metadata)      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚ For each chunk:          â”‚         â”‚
â”‚   â”‚ 1. Create Document       â”‚         â”‚
â”‚   â”‚ 2. Generate embedding    â”‚         â”‚
â”‚   â”‚ 3. Store in ChromaDB     â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                        â”‚
â”‚ â€¢ retrieve_relevant_chunks(query, k=5) â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚ 1. Embed query           â”‚         â”‚
â”‚   â”‚ 2. Similarity search     â”‚         â”‚
â”‚   â”‚ 3. Return top-K chunks   â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                        â”‚
â”‚ â€¢ generate_summary(text)               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚ 1. Build prompt          â”‚         â”‚
â”‚   â”‚ 2. Call GPT-4            â”‚         â”‚
â”‚   â”‚ 3. Parse response        â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                        â”‚
â”‚ â€¢ answer_question(question)            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚ 1. Retrieve context      â”‚         â”‚
â”‚   â”‚ 2. Build QA prompt       â”‚         â”‚
â”‚   â”‚ 3. Generate answer       â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Citation Graph Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CitationGraph Class               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Connection:                            â”‚
â”‚ â€¢ Neo4j Driver                         â”‚
â”‚ â€¢ bolt://localhost:7687                â”‚
â”‚                                        â”‚
â”‚ Methods:                               â”‚
â”‚ â€¢ add_paper(id, title, authors)        â”‚
â”‚   Cypher:                              â”‚
â”‚   MERGE (p:Paper {id: $id})            â”‚
â”‚   SET p.title = $title                 â”‚
â”‚                                        â”‚
â”‚ â€¢ add_citation(citing_id, cited_id)    â”‚
â”‚   Cypher:                              â”‚
â”‚   MERGE (a)-[:CITES]->(b)              â”‚
â”‚                                        â”‚
â”‚ â€¢ find_related_papers(paper_id)        â”‚
â”‚   Cypher:                              â”‚
â”‚   MATCH (p)-[:CITES]->(c)<-[:CITES]-(r)â”‚
â”‚   RETURN r ORDER BY count DESC         â”‚
â”‚                                        â”‚
â”‚ â€¢ find_influential_papers(limit)       â”‚
â”‚   Cypher:                              â”‚
â”‚   MATCH (p)<-[:CITES]-(citing)         â”‚
â”‚   RETURN p, count(citing) as citations â”‚
â”‚   ORDER BY citations DESC              â”‚
â”‚                                        â”‚
â”‚ â€¢ get_citation_network(paper_id, depth)â”‚
â”‚   Cypher:                              â”‚
â”‚   MATCH path=(p)-[:CITES*1..depth]-(r) â”‚
â”‚   RETURN nodes(path), relationships()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Memory System Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MemoryManager Class               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Storage: JSON file (data/memory.json)  â”‚
â”‚                                        â”‚
â”‚ Structure:                             â”‚
â”‚ [                                      â”‚
â”‚   {                                    â”‚
â”‚     "id": 1,                           â”‚
â”‚     "timestamp": "2024-01-01T12:00",   â”‚
â”‚     "type": "document",                â”‚
â”‚     "title": "Paper Title",            â”‚
â”‚     "summary": "...",                  â”‚
â”‚     "citations": [...],                â”‚
â”‚     "key_concepts": [...]              â”‚
â”‚   },                                   â”‚
â”‚   {                                    â”‚
â”‚     "id": 2,                           â”‚
â”‚     "timestamp": "2024-01-01T12:05",   â”‚
â”‚     "type": "query",                   â”‚
â”‚     "query": "What is...",             â”‚
â”‚     "answer": "..."                    â”‚
â”‚   }                                    â”‚
â”‚ ]                                      â”‚
â”‚                                        â”‚
â”‚ Methods:                               â”‚
â”‚ â€¢ add_interaction(query, response)     â”‚
â”‚ â€¢ add_document_memory(doc_info)        â”‚
â”‚ â€¢ get_recent_interactions(n)           â”‚
â”‚ â€¢ search_memory(keyword)               â”‚
â”‚ â€¢ get_context_for_query(query)         â”‚
â”‚   â””â”€â–º Returns relevant past context   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Scaling Architecture

### Current (Development)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Single Server              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FastAPI + Streamlit   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LangGraph + RAG       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ChromaDB (embedded)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Neo4j (local)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Scaled)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Users    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load Balancer  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  API 1     â”‚  â”‚  API 2    â”‚  â”‚  API N    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pinecone  â”‚  â”‚Neo4j      â”‚  â”‚Redis Cacheâ”‚
â”‚  (Vector)  â”‚  â”‚(Cluster)  â”‚  â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Celery     â”‚ â”‚ S3 Storage â”‚
        â”‚ Workers    â”‚ â”‚            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Security Layers                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚ 1. Network Layer                         â”‚
â”‚    â€¢ HTTPS/TLS                           â”‚
â”‚    â€¢ Firewall Rules                      â”‚
â”‚    â€¢ VPC (if cloud)                      â”‚
â”‚                                          â”‚
â”‚ 2. API Layer                             â”‚
â”‚    â€¢ JWT Authentication (future)         â”‚
â”‚    â€¢ API Key Validation                  â”‚
â”‚    â€¢ Rate Limiting                       â”‚
â”‚    â€¢ Input Validation                    â”‚
â”‚                                          â”‚
â”‚ 3. Application Layer                     â”‚
â”‚    â€¢ SQL Injection Prevention            â”‚
â”‚    â€¢ XSS Protection                      â”‚
â”‚    â€¢ CSRF Tokens                         â”‚
â”‚    â€¢ File Type Validation                â”‚
â”‚    â€¢ Path Traversal Prevention           â”‚
â”‚                                          â”‚
â”‚ 4. Data Layer                            â”‚
â”‚    â€¢ Encryption at Rest                  â”‚
â”‚    â€¢ Encryption in Transit               â”‚
â”‚    â€¢ Secure Credentials Storage          â”‚
â”‚    â€¢ Access Control Lists                â”‚
â”‚                                          â”‚
â”‚ 5. Monitoring Layer                      â”‚
â”‚    â€¢ Logging (no sensitive data)         â”‚
â”‚    â€¢ Anomaly Detection                   â”‚
â”‚    â€¢ Audit Trails                        â”‚
â”‚    â€¢ Alert System                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technology Stack Details

### Backend Stack
```
Python 3.9+
â”œâ”€â”€ FastAPI 0.109.0        (Web framework)
â”œâ”€â”€ Uvicorn 0.27.0         (ASGI server)
â”œâ”€â”€ Pydantic 2.5.3         (Data validation)
â”‚
â”œâ”€â”€ LangChain 0.1.0        (LLM orchestration)
â”‚   â”œâ”€â”€ langchain-openai   (OpenAI integration)
â”‚   â”œâ”€â”€ langchain-community (Community integrations)
â”‚   â””â”€â”€ langchain-core     (Core functionality)
â”‚
â”œâ”€â”€ LangGraph 0.0.26       (Workflow engine)
â”‚
â”œâ”€â”€ ChromaDB 0.4.22        (Vector database)
â”œâ”€â”€ Neo4j 5.16.0           (Graph database)
â”‚
â””â”€â”€ OpenAI 1.10.0          (LLM API)
```

### Frontend Stack
```
Streamlit 1.30.0
â””â”€â”€ Provides:
    â€¢ Interactive UI
    â€¢ File uploads
    â€¢ Real-time updates
    â€¢ Charts (future)
```

### Processing Stack
```
Document Processing
â”œâ”€â”€ PyMuPDF 1.23.8         (PDF extraction)
â”œâ”€â”€ BeautifulSoup4 4.12.3  (HTML parsing)
â”œâ”€â”€ Requests 2.31.0        (HTTP client)
â””â”€â”€ lxml 5.1.0             (XML/HTML processing)
```

## Deployment Architecture

### Docker Deployment
```
docker-compose.yml
â”œâ”€â”€ api-service
â”‚   â”œâ”€â”€ FastAPI app
â”‚   â””â”€â”€ Port 8000
â”‚
â”œâ”€â”€ ui-service
â”‚   â”œâ”€â”€ Streamlit app
â”‚   â””â”€â”€ Port 8501
â”‚
â”œâ”€â”€ neo4j-service
â”‚   â”œâ”€â”€ Graph database
â”‚   â”œâ”€â”€ Port 7474 (browser)
â”‚   â””â”€â”€ Port 7687 (bolt)
â”‚
â””â”€â”€ redis-service (future)
    â””â”€â”€ Cache layer
```

### Kubernetes Deployment
```
k8s/
â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ API pods (replicas: 3)
â”‚   â”œâ”€â”€ UI pods (replicas: 2)
â”‚   â””â”€â”€ Worker pods (replicas: 5)
â”‚
â”œâ”€â”€ service.yaml
â”‚   â”œâ”€â”€ LoadBalancer (API)
â”‚   â””â”€â”€ ClusterIP (internal)
â”‚
â”œâ”€â”€ ingress.yaml
â”‚   â””â”€â”€ HTTPS routing
â”‚
â””â”€â”€ configmap.yaml
    â””â”€â”€ Environment config
```

---

This architecture supports:
- âœ… Modularity
- âœ… Scalability
- âœ… Maintainability
- âœ… Extensibility
- âœ… Production readiness
